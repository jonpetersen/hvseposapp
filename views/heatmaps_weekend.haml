%script{:src => "https://d3js.org/d3.v3.min.js"}
%script{:src => "./js/ie-emulation-modes-warning.js"}
%script{:type => 'text/javascript', :src => "./cal-heatmap-master/cal-heatmap.min.js"}
%link{:href => "./cal-heatmap-master/cal-heatmap.css", :rel => "stylesheet"}
%br
%div
  #items-by-hour
  <script type="text/javascript">
  (function() {
  var cal = new CalHeatMap();
  cal.init({
  itemSelector: "#items-by-hour",
  domain: "day",
  domainLabelFormat: "%a %e %b %y",
  subDomain: "hour",
  range: 300,
  rowLimit: 1,
  domainGutter: 0,
  data: "http://hvsapp.jonpetersen.co.uk/salesactivity?output=json&period=weekend",
  considerMissingDataAsZero: true,
  start: new Date().setTime(new Date().getTime() - (24*60*60*1000) * 326),
  cellSize: 15,
  cellPadding: 5,
  verticalOrientation: true,
  displayLegend: false,
  label: {position: "left",offset: {x: 20,y: 12},width: 110},
  legend: [1,20,60,80,100,110,120,130,140,150,160],
  legendColors: {min: "#ffe4eb",max: "#9d0003",empty: "#e6e6e6"},
  previousSelector: "#items-by-hour-PreviousDomain-selector",
  nextSelector: "#items-by-hour-NextDomain-selector",
  });
  cal.next(28);
  })();
  </script>